"use strict";angular.module("projectsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngMaterial","firebase","ui.router"]).run(["$rootScope","$location",function(a,b){a.$on("$routeChangeError",function(a,c,d,e){"AUTH_REQUIRED"===e&&(window.alert("You forgot to log in!"),console.log("auth required"),b.path("/"))})}]).config(["$routeProvider","$mdThemingProvider",function(a,b){b.theme("default"),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl",resolve:{currentAuth:["$firebaseAuth",function(a){var b=new Firebase("https://shining-torch-23.firebaseio.com/"),c=a(b);return c.$requireAuth()}]}}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl",resolve:{currentAuth:["$firebaseAuth",function(a){var b=new Firebase("https://shining-torch-23.firebaseio.com/"),c=a(b);return c.$requireAuth()}]}}).otherwise({redirectTo:"/"})}]),angular.module("projectsApp").controller("MainCtrl",["$scope","$location","$firebaseAuth","firebaseService","$mdDialog","alertService",function(a,b,c,d,e,f){a.data={selectedIndex:0,secondLocked:!0,secondLabel:"Item Two"},a.next=function(){a.data.selectedIndex=Math.min(a.data.selectedIndex+1,2)},a.previous=function(){a.data.selectedIndex=Math.max(a.data.selectedIndex-1,0)},a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var g=new Firebase(d.getFirebBaseURL()),h=c(g);a.createUser=function(a,b,c){b.$valid&&(console.log("register user on firebase"),h.$createUser({email:a.email,password:a.password}).then(function(b){var d="Welcome",e="The new user account has been successfully created.";f.show(d,e,c),g.child("users").child(b.uid).set({email:a.email,firstName:a.firstName,lastName:a.lastName})})["catch"](function(a){if("EMAIL_TAKEN"==a.code){var b="Error Creating Account",d="The new user account cannot be created because the email is already in use.";f.show(b,d,c)}}))};var i=function(c,d){b.path(c),a=a||angular.element(document).scope(),(d||!a.$$phase)&&a.$apply()},i=function(c,d){b.path(c),a=a||angular.element(document).scope(),(d||!a.$$phase)&&a.$apply()};a.login=function(a,b,c){b.$valid&&h.$authWithPassword({email:a.email,password:a.password}).then(function(a){console.log("Logged in as:"+a.uid),g.child("users").child(a.uid).once("value",function(a){var b=a.val();console.log(b),i("/home",!0)})})["catch"](function(a){var b="Authentication Error",d="Invalid E-mail or password. Please try again";f.show(b,d,c)})},a.registerFB=function(){g.authWithOAuthPopup("facebook",function(a,b){a?console.log("Login Failed!",a):(console.log("Authenticated successfully with payload:",b),i("/home",!0))},{scope:"email,user_likes"})},a.registerGoogle=function(){g.authWithOAuthPopup("google",function(a,b){a?console.log("Login Failed!",a):(console.log("Authenticated successfully with payload:",b),i("/home",!0))})},a.registerTwitter=function(){g.authWithOAuthPopup("twitter",function(a,b){a?console.log("Login Failed!",a):(console.log("Authenticated successfully with payload:",b),i("/home",!0))})}}]),angular.module("projectsApp").controller("UserCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("projectsApp").controller("SettingsCtrl",["$scope",function(a){{var b="https://shining-torch-23.firebaseio.com/";new Firebase(b+"/users")}a.genToolbox=function(){console.log("spinning settings...")}}]),angular.module("projectsApp").controller("HomeCtrl",["$scope","$firebaseAuth","$location","$timeout","$mdSidenav","$log",function(a,b,c,d,e,f){var g=new Firebase("https://shining-torch-23.firebaseio.com/"),h=b(g),i=h.$getAuth();i?console.log("Logged in as:",i.uid):console.log("Logged out"),a.toggleLeft=function(){e("left").toggle().then(function(){f.debug("toggle left is done")})},a.close=function(){e("left").close().then(function(){f.debug("close LEFT is done")})};var j=function(b,d){c.path(b),a=a||angular.element(document).scope(),(d||!a.$$phase)&&a.$apply()};a.goToSettings=function(){j("/settings")}}]),angular.module("projectsApp").service("firebaseService",function(){var a="https://shining-torch-23.firebaseio.com/";return{getFirebBaseURL:function(){return a}}}),angular.module("projectsApp").service("alertService",["$mdDialog",function(a){return{show:function(b,c,d){a.show(a.alert().title(b).content(c).ariaLabel("Alert Dialog").ok("close").targetEvent(d))}}}]);